<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{Name}'s Site</title>

    <link rel="stylesheet" href="/css/site.css" />
    <link
      href="https://fonts.googleapis.com/css?family=Roboto+Slab:700|Roboto&display=fallback"
      rel="stylesheet"
    />
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/pako/2.1.0/pako.min.js"
      integrity="sha512-g2TeAWw5GPnX7z0Kn8nFbYfeHcvAu/tx6d6mrLe/90mkCxO+RcptyYpksUz35EO337F83bZwcmUyHiHamspkfg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/upng-js/2.1.0/UPNG.min.js"
      integrity="sha512-0EGvUncys73hZ+0MCLp5YxHM29nv0HO8oMVK0Tsz0DtuGa6G8+6YZUdHdt3gN1rKsVWvxuBmCj0y/2Zon7yopQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js" integrity="sha512-XMVd28F1oH/O71fzwBnV7HucLxVwtxf26XV8P4wPk26EDxuGZ91N8bsOttmnomcCD3CS5ZMRL50H0GgOHvegtg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/msgpack5/6.0.2/msgpack5.js" integrity="sha512-D3HdIkfIllE1pD3AnWtzgBIfwKI5zgl6rxM3TWglPmzOhwMuEpBb0OzTmb4nzJlufHWnoz3JuthcYS7RWVUYdw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/5.1.0/marked.min.js" integrity="sha512-j5KAPeir0rGl+OSddiUeUtUlG+GK7acI/kNQqrpjSSB1IlDUbj3VnQOyoW3GWpPj7i8CSfb0T+Q4IRHxAPRxCA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="/public/game-boy-element.js" type="module" defer></script>
    <script src="/public/tenmile-quote-element.js" type="module" defer></script>
  </head>
  <body>
    <header>
      <a href="/" class="link--home">Home</a>
      <a href="/portfolio" class="link--portfolio">Portfolio</a>
      <a href="/about" class="link--about">About</a>
    </header>
    <main>
      


<div class="wrapper portfolio">
  <div>
    
    
    <a href=https://github.com/StudentAlleg/allegbot><h1 class='portfolioTitle'

      >Allegiance Discord Bot</h1></a>
      
    
    
    
    <h2>Overview</h2>
<p>A small <a href="https://discordpy.readthedocs.io/en/stable/">discord.py</a> discord bot that querys the <a href="https://steamcommunity.com/dev">Steam API</a> to display an updated count of players in <a href="https://store.steampowered.com/app/700480/Microsoft_Allegiance/">Microsoft Allegiance</a>.</p>
<h2>Problem</h2>
<p><a href="https://store.steampowered.com/app/700480/Microsoft_Allegiance/">Allegiance</a> is a small community, since it is a game now 24 years old <b>TODO make this automatic</b>. Games only happen at certain times, usually on the weekend. People have made tools in the past that let people know how many players are in game, so that interested parties do not have to go through the full process. These have become inoperative over time.</p>
<h3>Skills Demonstrated</h3>
<ul>
<li>Python</li>
<li>Git version control</li>
<li>Request from API</li>
<li>Linux</li>
<li>Linux Systemd</li>
<li>SSH</li>
</ul>
<h2>My Solution</h2>
<p>Since I have already <a href="/portfolio/discord-bot-foxhole">made a discord bot in the past</a>, I had a strong foundation with which to base this <a href="https://discordpy.readthedocs.io/en/stable/">discord.py</a> bot on. The <a href="https://steamcommunity.com/dev">Steam API</a> has a handy API that when queried returns the number of players currently in a specific game. Pass in the game id and our API key, and we have the data we need.
So just send a message everytime that number changes and that would be fine!</p>
<h3>Permanance</h3>
<p>Running a discord bot from my local machine does not work very well. People assume that the bot will always be up. For this specific bot, most of the time it will be used between Fridays and Sundays. I chose to use a <a href="https://www.raspberrypi.com/products/raspberry-pi-zero/">Respberry Pi Zero</a> to host my bot on, because it is cheap and easy to use. Since my bot does not use many resources, it was perfect for my usecase.</p>
<h4>Setup</h4>
<p>After porting it to my <a href="https://www.raspberrypi.com/products/raspberry-pi-zero/">Respberry Pi Zero</a> (I develop on Windows), we need to set it up to run automatically. RaspberryPi has systemmd's that we can define in a <code>.service</code> file, and then enable. <a href="https://linuxhandbook.com/create-systemd-services/">Here</a> is a decent tutorial describing the process. From there, we can make it run on the startup and automatically retry if anything fails.</p>
<h3>Continued Improvements</h3>
<p>While the bot worked, and was now always online, there was a few pain points. It was unclear whether the bot was online and working, or if there was just a long period between player count changes. <a href="https://store.steampowered.com/app/700480/Microsoft_Allegiance/">Allegiance</a> does not see many players during the week, so it is not uncommon for the number online to settle at 1 or 2 (presumably someone just leaving it open on their computer). There was no way to check. To improve user experience, I added 2 things. The first being a command that the user could run, which would send them the current player count. The second being a counter of the number of times the bot had checked the API. These allowed users to see that the bot was working, online, and confirmed the current status.</p>
<h2>Reflection</h2>
<h3>New Knowledge</h3>
<ul>
<li>RaspberryPi</li>
<li>Linux Systemmd</li>
<li>Python virtual environments</li>
<li>API Request</li>
</ul>
<h3>Usage</h3>
<p>For the scope of the project, it is just about perfect. Cheap, simple to run, and did not take a lot of development time. It stayed on scope and does what it needs to do. It outputs regulary in a discord channel setup for it, so sees use weekly. There is very little maintenance to do, after about a month of occasionally needing to fix a problem, I no longer need to do anything with it. Every so often I will manually restart the <a href="https://www.raspberrypi.com/products/raspberry-pi-zero/">Respberry Pi Zero</a>, but I really do not need to do that.</p>
<h3>How would I make it today</h3>
<p>There is only really 2 problems that bother me today. First, it does not do dependency management at all. Python usually uses a <code>requirements.txt</code> file, this does not have it, meaning that if I or anyone else was to put it onto a different machine, it would have to be done manually. Second, it does not do secrets correctly. It should use a <code>.env</code> file, for things like the API key. Instead it uses a file called <code>key.py</code> that stores these as variables that are then imported.</p>

    <div class="controls">
    
    
      <p>
        <strong>Previous Project</strong>: 
        <a class="previous" href="/portfolio/playable-quotes/mupen64-pq/">Playable Quotes Mupen64</a>
      </p>
    
    
      <p>
        <strong>Next Project</strong>: 
        <a class="next" href="/portfolio/cmpm147/">CMPM 147 Generative Design</a>
      </p>
    
    </div>
  </div>
</div>
    </main>
    <footer>&copy; My Site</footer>
  </body>
</html>